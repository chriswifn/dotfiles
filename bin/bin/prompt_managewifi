#!/bin/sh

# Description:  Script to manage configured wifi connections 
# Dependencies: tofi (wayland), rofi (xorg) 
#               nmcli
# Author:       Christian Hageloch


# set the prompt variable
case "$XDG_SESSION_TYPE" in
  wayland)
    _PROMPT="tofi --prompt-text "
    ;;
  *)
    _PROMPT="rofi -dmenu -i -p "
    ;;
esac

_NAMES="$(nmcli connection | awk -F '  ' 'NR>=2 {print $1}')"
_CHOICE="$(echo "$_NAMES" | $_PROMPT "Choose network option:")" || exit

case "$(nmcli connection | grep "$_CHOICE" | awk '{print $NF}')" in
  "--") 
    nmcli connection up "$_CHOICE"
    exit
    ;;
  *)
    nmcli connection down "$_CHOICE"
    exit
    ;;
esac
